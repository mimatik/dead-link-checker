#!/bin/bash

# Dead Link Crawler - Run Script
# Automatically manages dependencies and runs the crawler with uv

set -e  # Exit on any error

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# Check if uv is installed
if ! command -v uv &> /dev/null; then
    echo "❌ uv not found!"
    echo "Please install uv: curl -LsSf https://astral.sh/uv/install.sh | sh"
    exit 1
fi

# Sync dependencies (uv handles virtual environment automatically)
echo "🔧 Syncing dependencies with uv..."
uv sync

# Run the crawler
echo "🚀 Starting Dead Link Crawler..."
echo "=================================="
uv run dead_link_checker.py

echo ""
echo "✅ Crawling completed!"
